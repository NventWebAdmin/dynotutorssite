{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorssite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorssite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorssite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorssite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorssite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorssite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{GetGoogleIcon}from\"./icons\";import Rteditor from\"./richtexteditor\";import{getRecorddata,createRecord,bulkcreateRecord}from\"../db/index\";import Spinner from\"./spinner\";import{sortArray,fieldTypeHtmltoDBmapping,getLocalData,serverButtonHandler}from\"../js/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var F=/*#__PURE__*/function(_Component){_inherits(F,_Component);var _super=_createSuper(F);function F(props){var _this;_classCallCheck(this,F);_this=_super.call(this,props);_this.cancelMail=function(){_this.props.onmailsent({msgObj:{}});};_this.sendMail=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var localdata,orgname,userid,_this$state,tomailselectedarray,subject,startdate,starthour,startmin,enddate,endhour,endmin,body,recorddata,attendeeuserid,i,d,n,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:localdata=getLocalData(_this.props);console.log(localdata);orgname=localdata.orgname,userid=localdata.userid;_this$state=_this.state,tomailselectedarray=_this$state.tomailselectedarray,subject=_this$state.subject,startdate=_this$state.startdate,starthour=_this$state.starthour,startmin=_this$state.startmin,enddate=_this$state.enddate,endhour=_this$state.endhour,endmin=_this$state.endmin;console.log(_this.state);// if (startdate == \"\" && this.props.defaultNewMeetingDate) {\n//   startdate = this.props.defaultNewMeetingDate;\n// }\n// if (starthour == \"\" && this.props.defaultNewMeetingHour != undefined) {\n//   starthour = this.props.defaultNewMeetingHour;\n// }\n// if (endhour == \"\" && this.props.defaultNewMeetingHour != undefined) {\n//   endhour = this.props.defaultNewMeetingHour;\n// }\nif(starthour.length==1||starthour<10){starthour=\"0\"+starthour;}if(startmin.length==1){startmin=\"0\"+startmin;}if(endhour.length==1||endhour<10){endhour=\"0\"+endhour;}if(endmin.length==1){endmin=\"0\"+endmin;}startdate=startdate+\"T\"+starthour+\":\"+startmin+\":00\";if(enddate==\"\"&&_this.props.defaultNewMeetingDate){enddate=_this.props.defaultNewMeetingDate;}enddate=enddate+\"T\"+endhour+\":\"+endmin+\":00\";body=document.getElementById(\"calendernewactiondiv\").innerHTML;console.log(tomailselectedarray);if(!(tomailselectedarray.length==0)){_context.next=18;break;}alert(\"To field cannot be empty\");_context.next=50;break;case 18:if(!(subject==\"\"||subject==undefined)){_context.next=22;break;}alert(\"Subject field cannot be empty\");_context.next=50;break;case 22:if(!(starthour==\"\"||starthour==undefined||starthour==\"select\")){_context.next=26;break;}alert(\"starthour field cannot be empty\");_context.next=50;break;case 26:if(!(startmin==\"\"||startmin==undefined||startmin==\"select\")){_context.next=30;break;}alert(\"startmin field cannot be empty\");_context.next=50;break;case 30:if(!(endhour==\"\"||endhour==undefined||endhour==\"select\")){_context.next=34;break;}alert(\"endhour field cannot be empty\");_context.next=50;break;case 34:if(!(endmin==\"\"||endmin==undefined||endmin==\"select\")){_context.next=38;break;}alert(\"endmin field cannot be empty\");_context.next=50;break;case 38:console.log(tomailselectedarray);recorddata={orgname:orgname,id:\"mail-\"+userid+n,from:userid,to:tomailselectedarray.toString(),subject:subject,body:body};attendeeuserid={};for(i=0;i<tomailselectedarray.length;i++){attendeeuserid[i]={email:\"\",label:tomailselectedarray[i],name:tomailselectedarray[i],phone:\"\"};}d=new Date();n=d.getTime();recorddata={attendeeuserid:attendeeuserid,body:body,dialnumber:\"\",enddate:enddate,eventid:\"\",id:\"evt-\"+userid+\"-\"+startdate+\"-\"+n,link:\"zoom.com/123\",locationaddress:\"\",locationgocode:\"\",organizeruserid:userid,orgname:orgname,passcode:\"\",startdate:startdate,subject:subject,type:\"zoommeet,orgmeet\"};console.log(recorddata);_context.next=48;return createRecord({objectName:\"event\",objectData:recorddata});case 48:result=_context.sent;if(result.isSuccess===\"false\"){alert(result.message);}else{console.log(recorddata);_this.setState({showSpinner:\"true\"});_this.props.onmailsent({msgObj:{}});}case 50:case\"end\":return _context.stop();}}},_callee);}));_this.selectUser=function(x){var tomailselectedarray=_this.state.tomailselectedarray;if(!tomailselectedarray.includes(x)){tomailselectedarray.push(x);}var tomail=_this.state.tomail;tomail=tomail.replace(\"@\",\"\");_this.setState({tomailselectedarray:tomailselectedarray,tomail:\"\"});console.log(tomailselectedarray);document.getElementById(\"mailnnewactiontolist\").style.display=\"none\";};_this.removeselecteduser=function(x){var tomailselectedarray=_this.state.tomailselectedarray;var temparray=[];for(var i=0;i<tomailselectedarray.length;i++){if(tomailselectedarray[i]!=x)temparray.push(tomailselectedarray[i]);}_this.setState({tomailselectedarray:temparray});};_this.createElement=function(str){var div=document.createElement(\"div\");div.innerHTML=str;return div.childNodes;};_this.state={tomailsearchArray:[],attherateindex:\"0\",tomail:\"\",tomailselectedarray:[],subject:\"\",startdate:\"\",enddate:\"\",starthour:\"\",startmin:\"\",endhour:\"\",endmin:\"\",showSpinner:\"false\"};return _this;}_createClass(F,[{key:\"componentDidMount\",value:function componentDidMount(){var viewMeetingData=this.props.viewMeetingData;document.getElementById(\"calenderviewactiondiv\").innerHTML=viewMeetingData.body;}},{key:\"render\",value:function render(){console.log(this.props);var _this$props=this.props,defaultNewMeetingDate=_this$props.defaultNewMeetingDate,viewType=_this$props.viewType,viewMeetingData=_this$props.viewMeetingData;var _this$state2=this.state,tomailsearchArray=_this$state2.tomailsearchArray,tomail=_this$state2.tomail,tomailselectedarray=_this$state2.tomailselectedarray,startdate=_this$state2.startdate,enddate=_this$state2.enddate,starthour=_this$state2.starthour,endhour=_this$state2.endhour,showSpinner=_this$state2.showSpinner;var endmin,subject,body,startdatestr,enddatesstr,startmin,toArray=[];console.log(viewMeetingData);if(viewMeetingData!=undefined&&viewMeetingData!=\"\"){for(var i in viewMeetingData.attendeeuserid){toArray.push(viewMeetingData.attendeeuserid[i].name);}console.log(toArray.toString());startdate=new Date(viewMeetingData.startdate);enddate=new Date(viewMeetingData.enddate);var startdateMonth=(startdate.getMonth()+1).toString();if(startdateMonth.length==1){startdateMonth=\"0\"+startdateMonth;}var startdatedate=startdate.getDate().toString();if(startdatedate.length==1){startdatedate=\"0\"+startdatedate;}var enddateMonth=(enddate.getMonth()+1).toString();if(enddateMonth.length==1){enddateMonth=\"0\"+enddateMonth;}var enddatedate=enddate.getDate().toString();if(enddatedate.length==1){enddatedate=\"0\"+enddatedate;}startdatestr=startdate.getFullYear()+\"-\"+startdateMonth+\"-\"+startdatedate;enddatesstr=enddate.getFullYear()+\"-\"+startdateMonth+\"-\"+startdatedate;starthour=startdate.getHours();startmin=startdate.getMinutes();endhour=enddate.getHours();endmin=enddate.getMinutes();subject=viewMeetingData.subject;// body = [];\n// body.push(React.createElement(\"div\", \"\", viewMeetingData.body));\nconsole.log(startdate);console.log(enddate);console.log(starthour);console.log(endhour);}return/*#__PURE__*/_jsxs(_Fragment,{children:[showSpinner==\"true\"?/*#__PURE__*/_jsx(Spinner,{}):\"\",/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr\",children:[/*#__PURE__*/_jsx(\"span\",{style:{width:\"10%\",display:\"inline-block\",textAlign:\"center\"},children:\"To\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\",width:\"90%\"},children:[/*#__PURE__*/_jsx(\"div\",{children:toArray.toString()}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",zIndex:1,top:\"100%\",left:0,backgroundColor:\"red\",display:\"none\"},id:\"mailnnewactiontolist\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr\",children:[/*#__PURE__*/_jsx(\"span\",{style:{width:\"10%\",display:\"inline-block\",textAlign:\"center\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"org-fr org-fai-c \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr\",children:[/*#__PURE__*/_jsx(\"span\",{style:{width:\"10%\",display:\"inline-block\",textAlign:\"center\"},children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startdate\",defaultValue:startdatestr}),starthour,startmin]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr\",children:[/*#__PURE__*/_jsx(\"span\",{style:{width:\"10%\",display:\"inline-block\",textAlign:\"center\"},children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"enddate\",defaultValue:enddatesstr}),endhour,endmin]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr\",children:[/*#__PURE__*/_jsx(\"span\",{style:{width:\"10%\",display:\"inline-block\",textAlign:\"center\"},children:\"Subject\"}),subject]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr\",children:[/*#__PURE__*/_jsx(\"span\",{style:{width:\"10%\",display:\"inline-block\",textAlign:\"center\"},name:\"subject\",children:\"Body\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"90%\"},children:/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"50vh\",backgroundColor:\"white\",color:\"black\"},contenteditable:\"true\",id:\"calenderviewactiondiv\",children:body})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-fr\",children:[/*#__PURE__*/_jsx(\"span\",{style:{width:\"10%\",display:\"inline-block\",textAlign:\"center\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:this.cancelMail,children:\"Back\"})]})]});}}]);return F;}(Component);export default F;","map":{"version":3,"sources":["/Users/pradeep/Downloads/twilioudemy1/nventwebgithub/dynotutorssite/src/components/calenderviewaction.js"],"names":["React","Component","GetGoogleIcon","Rteditor","getRecorddata","createRecord","bulkcreateRecord","Spinner","sortArray","fieldTypeHtmltoDBmapping","getLocalData","serverButtonHandler","F","props","cancelMail","onmailsent","msgObj","sendMail","localdata","console","log","orgname","userid","state","tomailselectedarray","subject","startdate","starthour","startmin","enddate","endhour","endmin","length","defaultNewMeetingDate","body","document","getElementById","innerHTML","alert","undefined","recorddata","id","n","from","to","toString","attendeeuserid","i","email","label","name","phone","d","Date","getTime","dialnumber","eventid","link","locationaddress","locationgocode","organizeruserid","passcode","type","objectName","objectData","result","isSuccess","message","setState","showSpinner","selectUser","x","includes","push","tomail","replace","style","display","removeselecteduser","temparray","createElement","str","div","childNodes","tomailsearchArray","attherateindex","viewMeetingData","viewType","startdatestr","enddatesstr","toArray","startdateMonth","getMonth","startdatedate","getDate","enddateMonth","enddatedate","getFullYear","getHours","getMinutes","width","textAlign","position","zIndex","top","left","backgroundColor","height","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { GetGoogleIcon } from \"./icons\";\nimport Rteditor from \"./richtexteditor\";\nimport { getRecorddata, createRecord, bulkcreateRecord } from \"../db/index\";\nimport Spinner from \"./spinner\";\n\nimport {\n  sortArray,\n  fieldTypeHtmltoDBmapping,\n  getLocalData,\n  serverButtonHandler,\n} from \"../js/index\";\n\nclass F extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tomailsearchArray: [],\n      attherateindex: \"0\",\n      tomail: \"\",\n      tomailselectedarray: [],\n      subject: \"\",\n      startdate: \"\",\n      enddate: \"\",\n      starthour: \"\",\n      startmin: \"\",\n      endhour: \"\",\n      endmin: \"\",\n      showSpinner: \"false\",\n    };\n  }\n\n  componentDidMount() {\n    let { viewMeetingData } = this.props;\n\n    document.getElementById(\"calenderviewactiondiv\").innerHTML =\n      viewMeetingData.body;\n  }\n  cancelMail = () => {\n    this.props.onmailsent({ msgObj: {} });\n  };\n  sendMail = async () => {\n    let localdata = getLocalData(this.props);\n    console.log(localdata);\n    let { orgname, userid } = localdata;\n    let {\n      tomailselectedarray,\n      subject,\n      startdate,\n      starthour,\n      startmin,\n      enddate,\n      endhour,\n      endmin,\n    } = this.state;\n    console.log(this.state);\n\n    // if (startdate == \"\" && this.props.defaultNewMeetingDate) {\n    //   startdate = this.props.defaultNewMeetingDate;\n    // }\n\n    // if (starthour == \"\" && this.props.defaultNewMeetingHour != undefined) {\n    //   starthour = this.props.defaultNewMeetingHour;\n    // }\n\n    // if (endhour == \"\" && this.props.defaultNewMeetingHour != undefined) {\n    //   endhour = this.props.defaultNewMeetingHour;\n    // }\n\n    if (starthour.length == 1 || starthour < 10) {\n      starthour = \"0\" + starthour;\n    }\n    if (startmin.length == 1) {\n      startmin = \"0\" + startmin;\n    }\n    if (endhour.length == 1 || endhour < 10) {\n      endhour = \"0\" + endhour;\n    }\n    if (endmin.length == 1) {\n      endmin = \"0\" + endmin;\n    }\n\n    startdate = startdate + \"T\" + starthour + \":\" + startmin + \":00\";\n\n    if (enddate == \"\" && this.props.defaultNewMeetingDate) {\n      enddate = this.props.defaultNewMeetingDate;\n    }\n    enddate = enddate + \"T\" + endhour + \":\" + endmin + \":00\";\n\n    let body = document.getElementById(\"calendernewactiondiv\").innerHTML;\n    console.log(tomailselectedarray);\n    if (tomailselectedarray.length == 0) {\n      alert(\"To field cannot be empty\");\n    } else if (subject == \"\" || subject == undefined) {\n      alert(\"Subject field cannot be empty\");\n    } else if (\n      starthour == \"\" ||\n      starthour == undefined ||\n      starthour == \"select\"\n    ) {\n      alert(\"starthour field cannot be empty\");\n    } else if (\n      startmin == \"\" ||\n      startmin == undefined ||\n      startmin == \"select\"\n    ) {\n      alert(\"startmin field cannot be empty\");\n    } else if (endhour == \"\" || endhour == undefined || endhour == \"select\") {\n      alert(\"endhour field cannot be empty\");\n    } else if (endmin == \"\" || endmin == undefined || endmin == \"select\") {\n      alert(\"endmin field cannot be empty\");\n    } else {\n      console.log(tomailselectedarray);\n      let recorddata = {\n        orgname: orgname,\n        id: \"mail-\" + userid + n,\n        from: userid,\n        to: tomailselectedarray.toString(),\n        subject: subject,\n        body: body,\n      };\n      let attendeeuserid = {};\n      for (let i = 0; i < tomailselectedarray.length; i++) {\n        attendeeuserid[i] = {\n          email: \"\",\n          label: tomailselectedarray[i],\n          name: tomailselectedarray[i],\n          phone: \"\",\n        };\n      }\n      var d = new Date();\n      var n = d.getTime();\n\n      recorddata = {\n        attendeeuserid: attendeeuserid,\n        body: body,\n        dialnumber: \"\",\n        enddate: enddate,\n        eventid: \"\",\n        id: \"evt-\" + userid + \"-\" + startdate + \"-\" + n,\n        link: \"zoom.com/123\",\n        locationaddress: \"\",\n        locationgocode: \"\",\n        organizeruserid: userid,\n        orgname: orgname,\n        passcode: \"\",\n        startdate: startdate,\n        subject: subject,\n        type: \"zoommeet,orgmeet\",\n      };\n\n      console.log(recorddata);\n      let result = await createRecord({\n        objectName: \"event\",\n        objectData: recorddata,\n      });\n      if (result.isSuccess === \"false\") {\n        alert(result.message);\n      } else {\n        console.log(recorddata);\n        this.setState({ showSpinner: \"true\" });\n        this.props.onmailsent({ msgObj: {} });\n      }\n    }\n  };\n\n  selectUser = (x) => {\n    let tomailselectedarray = this.state.tomailselectedarray;\n    if (!tomailselectedarray.includes(x)) {\n      tomailselectedarray.push(x);\n    }\n\n    let tomail = this.state.tomail;\n    tomail = tomail.replace(\"@\", \"\");\n    this.setState({ tomailselectedarray: tomailselectedarray, tomail: \"\" });\n    console.log(tomailselectedarray);\n    document.getElementById(\"mailnnewactiontolist\").style.display = \"none\";\n  };\n\n  removeselecteduser = (x) => {\n    let tomailselectedarray = this.state.tomailselectedarray;\n    let temparray = [];\n    for (let i = 0; i < tomailselectedarray.length; i++) {\n      if (tomailselectedarray[i] != x) temparray.push(tomailselectedarray[i]);\n    }\n    this.setState({ tomailselectedarray: temparray });\n  };\n\n  createElement = (str) => {\n    var div = document.createElement(\"div\");\n    div.innerHTML = str;\n    return div.childNodes;\n  };\n\n  render() {\n    console.log(this.props);\n    let { defaultNewMeetingDate, viewType, viewMeetingData } = this.props;\n    let {\n      tomailsearchArray,\n      tomail,\n      tomailselectedarray,\n      startdate,\n      enddate,\n      starthour,\n      endhour,\n      showSpinner,\n    } = this.state;\n\n    let endmin,\n      subject,\n      body,\n      startdatestr,\n      enddatesstr,\n      startmin,\n      toArray = [];\n    console.log(viewMeetingData);\n    if (viewMeetingData != undefined && viewMeetingData != \"\") {\n      for (let i in viewMeetingData.attendeeuserid) {\n        toArray.push(viewMeetingData.attendeeuserid[i].name);\n      }\n      console.log(toArray.toString());\n\n      startdate = new Date(viewMeetingData.startdate);\n      enddate = new Date(viewMeetingData.enddate);\n\n      let startdateMonth = (startdate.getMonth() + 1).toString();\n      if (startdateMonth.length == 1) {\n        startdateMonth = \"0\" + startdateMonth;\n      }\n      let startdatedate = startdate.getDate().toString();\n      if (startdatedate.length == 1) {\n        startdatedate = \"0\" + startdatedate;\n      }\n\n      let enddateMonth = (enddate.getMonth() + 1).toString();\n      if (enddateMonth.length == 1) {\n        enddateMonth = \"0\" + enddateMonth;\n      }\n      let enddatedate = enddate.getDate().toString();\n      if (enddatedate.length == 1) {\n        enddatedate = \"0\" + enddatedate;\n      }\n      startdatestr =\n        startdate.getFullYear() + \"-\" + startdateMonth + \"-\" + startdatedate;\n      enddatesstr =\n        enddate.getFullYear() + \"-\" + startdateMonth + \"-\" + startdatedate;\n\n      starthour = startdate.getHours();\n      startmin = startdate.getMinutes();\n      endhour = enddate.getHours();\n      endmin = enddate.getMinutes();\n      subject = viewMeetingData.subject;\n      // body = [];\n      // body.push(React.createElement(\"div\", \"\", viewMeetingData.body));\n      console.log(startdate);\n      console.log(enddate);\n      console.log(starthour);\n      console.log(endhour);\n    }\n\n    return (\n      <>\n        {showSpinner == \"true\" ? <Spinner /> : \"\"}\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          >\n            To\n          </span>\n          <div style={{ position: \"relative\", width: \"90%\" }}>\n            <div>{toArray.toString()}</div>\n\n            <div\n              style={{\n                position: \"absolute\",\n                zIndex: 1,\n                top: \"100%\",\n                left: 0,\n                backgroundColor: \"red\",\n                display: \"none\",\n              }}\n              id=\"mailnnewactiontolist\"\n            >\n              {/* {tomailsearchArrayHoverHtml} */}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          ></span>\n          <div\n            className=\"org-fr org-fai-c\n        \"\n          >\n            {/* {tomailselectedarrayHtml} */}\n          </div>\n        </div>\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          >\n            Start Date\n          </span>\n          <input type=\"date\" name=\"startdate\" defaultValue={startdatestr} />\n          {starthour}\n          {startmin}\n        </div>\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          >\n            End Date\n          </span>\n          <input type=\"date\" name=\"enddate\" defaultValue={enddatesstr} />\n          {endhour}\n          {endmin}\n        </div>\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          >\n            Subject\n          </span>\n          {subject}\n        </div>\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n            name=\"subject\"\n          >\n            Body\n          </span>\n          <div style={{ width: \"90%\" }}>\n            <div\n              style={{\n                width: \"100%\",\n                height: \"50vh\",\n                backgroundColor: \"white\",\n                color: \"black\",\n              }}\n              contenteditable=\"true\"\n              id=\"calenderviewactiondiv\"\n            >\n              {body}\n            </div>\n          </div>\n        </div>\n        {/* <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          ></span>\n          <input style={{ width: \"90%\" }} type=\"file\" multiple=\"true\" />\n        </div> */}\n        <div className=\"org-fr\">\n          <span\n            style={{\n              width: \"10%\",\n              display: \"inline-block\",\n              textAlign: \"center\",\n            }}\n          ></span>\n          {/* <button contenteditable=\"true\" onClick={this.sendMail}>\n            Send\n          </button> */}\n          <button onClick={this.cancelMail}>Back</button>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default F;\n"]},"metadata":{},"sourceType":"module"}